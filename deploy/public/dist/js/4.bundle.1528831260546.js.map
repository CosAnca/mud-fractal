{"version":3,"sources":["webpack:///./core/Behaviour.js","webpack:///./core/modules/inview.js","webpack:///./core/modules/resizer.js","webpack:///./behaviours/Page1.js"],"names":["MixinBuilder","superclass","_classCallCheck","this","_len","arguments","length","mixins","Array","_key","reduce","c","mixin","mix","Behaviour","el","undefined","document","name","$name","$el","$eventBus","_core_modules_eventBus__WEBPACK_IMPORTED_MODULE_1__","$data","Object","_core_modules_refs__WEBPACK_IMPORTED_MODULE_0__","composeProps","attributes","routes","on","_core_router_actions__WEBPACK_IMPORTED_MODULE_2__","enter","exit","unmount","off","inview","ramda_src_curry__WEBPACK_IMPORTED_MODULE_1___default","root","events","options","defaults","rootMargin","threshold","destroy","observer","unobserve","IntersectionObserver","entry","item","ramda_src_head__WEBPACK_IMPORTED_MODULE_0___default","type","isIntersecting","_extends","observe","InviewMixin","_superclass","_class","_possibleConstructorReturn","__proto__","getPrototypeOf","apply","_inherits","_createClass","key","value","$observer","viewport","registerObserverOptions","_get","prototype","call","resizer","query","ramda_src_compose__WEBPACK_IMPORTED_MODULE_2___default","ramda_src_replace__WEBPACK_IMPORTED_MODULE_1___default","getPropertyValue","getCurrentMediaQuery","window","getComputedStyle","body","windowMatch","breakpoint","matchMedia","matches","getWindowProps","width","innerWidth","height","innerHeight","mapEventsToResize","ramda_src_map__WEBPACK_IMPORTED_MODULE_0___default","_ref","_ref2","_slicedToArray","fn","matchQueryTest","once","arg","match","bind","_core_modules_eventBus__WEBPACK_IMPORTED_MODULE_3__","entries","handle","last","windowResizeEvent","_getWindowProps","emit","addWindowResizeEvent","isRunning","raf__WEBPACK_IMPORTED_MODULE_4___default","a","addEventListener","removeEventListener","cancel","bank","forEach","ResizeMixin","$screen","screens","Page1","click [data-link]","mount","_this","$events","attachAll","log","onClick","e","elm","preventDefault","classList","toggle","(min-width: 1024px)","(min-width: 680px)","_ref3","add","_core_Behaviour__WEBPACK_IMPORTED_MODULE_0__","with","_core_modules_resizer__WEBPACK_IMPORTED_MODULE_1__","_core_modules_createEvents__WEBPACK_IMPORTED_MODULE_2__","_core_modules_inview__WEBPACK_IMPORTED_MODULE_4__","_core_modules_refs__WEBPACK_IMPORTED_MODULE_3__"],"mappings":"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","file":"4.bundle.1528831260546.js","sourcesContent":["import { composeProps } from '@/core/modules/refs'\nimport eventBus from '@/core/modules/eventBus'\nimport * as Actions from '@/core/router/actions'\n\nclass MixinBuilder {\n\tconstructor(superclass) {\n\t\tthis.superclass = superclass\n\t}\n\n\twith(...mixins) {\n\t\treturn mixins.reduce((c, mixin) => mixin(c), this.superclass)\n\t}\n}\n\nexport const mix = superclass => new MixinBuilder(superclass)\n\n/**\n * class Behaviour\n *\n */\nexport default class Behaviour {\n\tconstructor(el = document, name = '') {\n\t\tthis.$name = name\n\t\tthis.$el = el\n\t\tthis.$eventBus = eventBus\n\t\tthis.$data = composeProps([...this.$el.attributes]) // here lies a bug\n\t}\n\n\tinit() {\n\t\tif (this.routes) {\n\t\t\tthis.$eventBus.on(Actions.ROUTE_TRANSITION_ENTER, this.routes.enter)\n\t\t\tthis.$eventBus.on(Actions.ROUTE_TRANSITION_EXIT, this.routes.exit)\n\t\t}\n\t}\n\n\tmount() {}\n\n\tunmount() {}\n\n\tdestroy() {\n\t\tthis.unmount()\n\n\t\tif (this.routes) {\n\t\t\tthis.$eventBus.off(Actions.ROUTE_TRANSITION_ENTER, this.routes.enter)\n\t\t\tthis.$eventBus.off(Actions.ROUTE_TRANSITION_EXIT, this.routes.exit)\n\t\t}\n\t}\n}\n","import * as R from 'ramda'\n\nexport const inview = R.curry((root, events, options) => {\n\tif (!events) return\n\n\tconst opts = options ? options : {}\n\tconst defaults = {\n\t\trootMargin: '0px',\n\t\tthreshold: 0,\n\t\t...opts\n\t}\n\n\tconst destroy = () => observer.unobserve(root)\n\n\tconst onIntersection = entry => {\n\t\tconst item = R.head(entry)\n\t\tconst { isIntersecting } = item\n\t\tconst type = isIntersecting ? 'enter' : 'exit'\n\t\tif (events[type]) {\n\t\t\tevents[type]({\n\t\t\t\t...item,\n\t\t\t\tdestroy\n\t\t\t})\n\t\t}\n\t}\n\n\tconst observer = new IntersectionObserver(onIntersection, defaults)\n\n\tobserver.observe(root)\n\n\treturn {\n\t\tdestroy\n\t}\n})\n\nexport const InviewMixin = superclass =>\n\tclass extends superclass {\n\t\tinit() {\n\t\t\tthis.$observer = inview(\n\t\t\t\tthis.$el,\n\t\t\t\tthis.viewport,\n\t\t\t\tthis.registerObserverOptions || {}\n\t\t\t)\n\n\t\t\tif (super.init) super.init()\n\n\t\t\treturn this\n\t\t}\n\n\t\tdestroy() {\n\t\t\t// this.$observer.destroy()\n\t\t\tif (super.destroy) super.destroy()\n\t\t}\n\t}\n","import eventBus from '@/core/modules/eventBus'\nimport raf from 'raf'\nimport * as R from 'ramda'\n/***\n *\n * Wrapper/Helper window resize event\n *\n * @function resizer\n *\n * @return :function resizer\n */\n\nexport const resizer = (function() {\n\t// get the :after style from the body\n\tconst getStyle = () => window.getComputedStyle(document.body, ':after')\n\n\t// get the content prop and give it a clean\n\tconst query = R.compose(R.replace(/'|\"/g, ''), item =>\n\t\titem.getPropertyValue('content')\n\t)\n\n\t// compose the functions together to return the current breakpoint\n\tconst getCurrentMediaQuery = R.compose(query, getStyle)\n\n\tconst windowMatch = breakpoint => window.matchMedia(breakpoint).matches\n\n\t/**\n\t *\n\t * @function getWindowProps\n\t *\n\t * @return :object with the current width/height/breakpoint\n\t */\n\tfunction getWindowProps() {\n\t\tconst width = window.innerWidth\n\t\tconst height = window.innerHeight\n\t\tconst query = getCurrentMediaQuery()\n\n\t\treturn {\n\t\t\twidth,\n\t\t\theight,\n\t\t\tquery\n\t\t}\n\t}\n\t/**\n\t *\n\t * consumes an object like this:\n\t *\n\t *  {\n\t *\t'(min-width: 960px)': () => {},\n\t *\t'(min-width: 680px)': () => {}\n\t *\t}\n\t *\n\t * @function mapEventsToResize\n\t *\n\t * @param :object\n\t *\n\t * @return :array of functions\n\t */\n\tfunction mapEventsToResize(events) {\n\t\treturn R.compose(\n\t\t\tR.map(([breakpoint, fn]) => {\n\t\t\t\t// <REFACTOR></REFACTOR> me thinks this could be written in\n\t\t\t\t// a way that it can be defined outside of the loop\n\t\t\t\tconst once = (arg, fn) => {\n\t\t\t\t\tif (once.value === arg) return\n\t\t\t\t\tfn({ match: arg, ...getWindowProps() })\n\t\t\t\t\tonce.value = arg\n\t\t\t\t}\n\n\t\t\t\t// <REFACTOR></REFACTOR> me thinks this could be written in\n\t\t\t\t// a way that it can be defined outside of the loop\n\t\t\t\tconst test = (breakpoint, fn) => {\n\t\t\t\t\tconst state = windowMatch(breakpoint)\n\t\t\t\t\tonce(state, fn)\n\t\t\t\t}\n\n\t\t\t\tconst matchQueryTest = test.bind(null, breakpoint, fn)\n\t\t\t\twindowMatch(breakpoint) && matchQueryTest()\n\t\t\t\teventBus.on('window:resize', matchQueryTest)\n\n\t\t\t\treturn matchQueryTest\n\t\t\t}),\n\t\t\tObject.entries\n\t\t)(events)\n\t}\n\n\t// setup a handle reference\n\tlet handle\n\n\t// reference the current, will become to previous one\n\tlet last = getCurrentMediaQuery()\n\n\t/**\n\t * The throttled window resize event\n\t * @private\n\t * @function windowResizeEvent\n\t *\n\t * @return void\n\t */\n\tfunction windowResizeEvent() {\n\t\tconst { width, height, query } = getWindowProps()\n\n\t\teventBus.emit('window:resize', {\n\t\t\twidth,\n\t\t\theight,\n\t\t\tquery\n\t\t})\n\n\t\tif (query !== last) {\n\t\t\tlast = query\n\t\t\teventBus.emit('window:breakpoint', {\n\t\t\t\twidth,\n\t\t\t\theight,\n\t\t\t\tquery\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * add the window resize event\n\t *\n\t * returns the destroy method\n\t *\n\t * @function addWindowResizeEvent\n\t *\n\t * @return object\n\t */\n\tfunction addWindowResizeEvent() {\n\t\tif (addWindowResizeEvent.isRunning) return\n\t\taddWindowResizeEvent.isRunning = true\n\t\thandle = raf.bind(null, windowResizeEvent)\n\n\t\twindow.addEventListener('resize', handle, false)\n\n\t\treturn {\n\t\t\tdestroy() {\n\t\t\t\tif (!addWindowResizeEvent.isRunning) return\n\t\t\t\taddWindowResizeEvent.isRunning = false\n\t\t\t\twindow.removeEventListener('resize', handle, false)\n\t\t\t\thandle.cancel()\n\t\t\t}\n\t\t}\n\t}\n\n\taddWindowResizeEvent.isRunning = false\n\n\treturn (events = {}) => {\n\t\taddWindowResizeEvent()\n\n\t\t// store the current events\n\t\tlet bank = mapEventsToResize(events)\n\n\t\treturn {\n\t\t\tget breakpoint() {\n\t\t\t\treturn getCurrentMediaQuery()\n\t\t\t},\n\n\t\t\tget width() {\n\t\t\t\treturn window.innerWidth\n\t\t\t},\n\n\t\t\tget height() {\n\t\t\t\treturn window.innerHeight\n\t\t\t},\n\n\t\t\tdestroy() {\n\t\t\t\tbank.forEach(fn => eventBus.off('window:resize', fn))\n\t\t\t\tbank = []\n\t\t\t},\n\n\t\t\t...eventBus\n\t\t}\n\t}\n})()\n\nexport const ResizeMixin = superclass =>\n\tclass extends superclass {\n\t\tinit() {\n\t\t\tthis.$screen = resizer(this.screens)\n\t\t\tif (super.init) super.init()\n\t\t\treturn this\n\t\t}\n\n\t\tdestroy() {\n\t\t\tthis.$screen.destroy()\n\t\t\tif (super.destroy) super.destroy()\n\t\t}\n\t}\n","import Behaviour, { mix } from '@/core/Behaviour'\nimport { ResizeMixin } from '@/core/modules/resizer'\nimport { CreateEventsMixin } from '@/core/modules/createEvents'\nimport { RefsMixin } from '@/core/modules/refs'\nimport { InviewMixin } from '@/core/modules/inview'\n\nexport default class Page1 extends mix(Behaviour).with(\n\tResizeMixin,\n\tCreateEventsMixin,\n\tInviewMixin,\n\tRefsMixin\n) {\n\tevents = {\n\t\t'click [data-link]': 'onClick'\n\t}\n\tmount = () => {\n\t\tthis.$events.attachAll()\n\n\t\tlog(this)\n\t}\n\n\tonClick = (e, elm) => {\n\t\te.preventDefault()\n\t\telm.classList.toggle('huzzah')\n\t\tlog('HELLO')\n\t}\n\n\tscreens = {\n\t\t'(min-width: 1024px)': ({ match, width, height, query }) => {\n\t\t\tlog('(min-width: 1024px)', match, width, height, query)\n\t\t},\n\n\t\t'(min-width: 680px)': ({ match, width, height, query }) => {\n\t\t\tlog('(min-width: 680px)', match, width, height, query)\n\t\t}\n\t}\n\n\tunmount = () => {\n\t\t// log('unmount: HomePage')\n\t\tthis.$el.classList.add('unmount')\n\t}\n\n\tviewport = {\n\t\tenter: () => {\n\t\t\tlog('ExampleClass enter')\n\t\t},\n\n\t\texit: () => {\n\t\t\tlog('ExampleClass exit')\n\t\t}\n\t}\n\n\troutes = {\n\t\tenter: () => {\n\t\t\tthis.$el.classList.toggle('enter')\n\t\t},\n\t\texit: () => {\n\t\t\tthis.$el.classList.toggle('exit')\n\t\t}\n\t}\n}\n"],"sourceRoot":""}