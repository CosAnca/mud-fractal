{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./core/modules/eventBus.js","webpack:///./core/router/actions.js","webpack:///./core/modules/refs.js","webpack:///./core/modules/createEvents.js","webpack:///./core/router/fetch.worker.js","webpack:///./core/modules/loader.js","webpack:///./core/utils/strings.js","webpack:///./core/router/cache.js","webpack:///./core/router/utils/links.js","webpack:///./core/router/history.js","webpack:///./core/router/request.js","webpack:///./core/router/utils/parseUrl.js","webpack:///./core/router/utils/paths.js","webpack:///./core/router/lifecycle.js","webpack:///./core/router/transition.js","webpack:///./core/router/index.js","webpack:///./core/App.js","webpack:///./views/loaders/pagination.js","webpack:///./app.js","webpack:///./views/index.js","webpack:///./behaviours lazy ^\\.\\/.*$ namespace object","webpack:///./plugins/logger.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","7","8","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","head","document","getElementsByTagName","script","createElement","charset","timeout","nc","setAttribute","src","p","setTimeout","onScriptComplete","type","target","event","onerror","onload","clearTimeout","chunk","errorType","realSrc","error","Error","request","undefined","appendChild","all","m","c","d","name","getter","o","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","oe","err","console","jsonpArray","this","oldJsonpFunction","bind","slice","eventBus","mitt__WEBPACK_IMPORTED_MODULE_0__","__webpack_exports__","ROUTE_TRANSITION_COMPLETE","ROUTER_POP_EVENT","ROUTE_TRANSITION_LOAD","ROUTE_TRANSITION_EXIT","ROUTE_TRANSITION_RESOLVED","ROUTE_TRANSITION_BEFORE_DOM_UPDATE","ROUTE_TRANSITION_AFTER_DOM_UPDATE","ROUTE_TRANSITION_ENTER","sanitizeName","replace","$0","$1","toUpperCase","removeValueLess","ramda__WEBPACK_IMPORTED_MODULE_0__","_ref","getDataAttributes","attr","test","cleanName","_ref2","substr","flattenToObject","acc","_ref3","key","composeProps","createRefs","node","getAttribute","_extends","attributes","gatherProps","root","querySelectorAll","ramda__WEBPACK_IMPORTED_MODULE_1__","context","obj","_this","events","entries","map","_slicedToArray","fn","eventAndNode","capture","funk","concat","_toConsumableArray","$delegate","emit","handleFunctions","evt","transform","fns","_$delegate","item","_ref4","join","attachAll","dom_delegate__WEBPACK_IMPORTED_MODULE_0___default","a","_$delegate2","on","attach","remove","destroy","_$delegate3","off","$node","createEvent","initEvent","dispatchEvent","Worker","loader","state","stack","scope","gatherBehaviours","es","behaviour","then","resp","id","default","hydrate","wrapper","arguments","Behaviour","init","mount","closest","assign","unmount","removeSpecialCharacters","segmentize","str","match","ch","beautifyPath","slugFromPath","router_cache","cache","set","previous","$anchors","defaultClasses","history","preventClick","element","href","which","metaKey","ctrlKey","shiftKey","altKey","window","location","protocol","hostname","indexOf","classList","contains","getLinks","pathname","link","activeLinks","parent","classes","classNames","path","testSegments","className","add","links_toConsumableArray","_ref6","segments","matchAgainst","_ref7","log","router_history","createBrowserHistory_default","listen","action","actions","store","from","to","options","fetch","response","ok","status","url","parseUri","parser","strictMode","exec","uri","q","$2","decodeParam","param","decodeURIComponent","_","strict","loose","parseUrl_matchRoute","sensitive","end","keys","re","path_to_regexp_default","params","repeat","split","delimiter","flattenRoutes","curr","tmpPath","children","rest","_objectWithoutProperties","tmp","paths_extends","items","Array","isArray","paths_toConsumableArray","mapChildren","base","container","pattern","matchRoute","exitTransition","enterTransition","paths_findRoute","routes","routeMap","_parseUri","hash","host","queryKey","source","anchor","isRoot","slug","query","last","slugLength","pathLength","score","pageNo","parseInt","paths_matches","router_transition","el","onLoad","props","info","shouldUnmount","onError","warn","updateDom","newHtml","title","innerHTML","onExit","next","onAfterExit","onEnter","onAfterEnter","router_lifecycle","addRoutes","routesObject","setWrapper","newState","view","transition","trans","dataAttrs","exitProps","lifecycle_extends","oldHtml","querySelector","method","lifecycle_slicedToArray","markup","html","domify_default","textContent","trim","enterProps","_class","_temp","worker","defaultRoutes","core_router","addEventListener","forEach","Router","rootNode","navLinks","_classCallCheck","onMouseEnter","elm","catch","onClick","stopPropagation","preventDefault","refs","router_toConsumableArray","goTo","_ref5","$links","$events","lazyload","links","postMessage","$wrapper","createEvents","click a","mouseover a","prevHtml","nextHtml","toggleBtnState","pagination","display","$btn","style","_from$options","paginationParent","fromPageNumber","fromOptions","toPageNumber","alienPage","$previousWrapper","previousElementSibling","tempPrev","parentNode","removeChild","insertBefore","App","router","chunks","App_classCallCheck","$loader","$router","App_extends","getElementById","app_toConsumableArray","./Header","./Header.js","./HomePage","./HomePage.js","./Page1","./Page1.js","./Page2","./Page2.js","./Page3","./Page3.js","./Page4","./Page4.js","webpackAsyncContext","req","ids","code","global","debug__WEBPACK_IMPORTED_MODULE_0___default","disable"],"mappings":"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","file":"app.bundle.1528066777683.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \tvar installedChunks = {\n \t\t7: 0,\n \t\t8: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar head = document.getElementsByTagName('head')[0];\n \t\t\t\tvar script = document.createElement('script');\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = __webpack_require__.p + \"\" + ({}[chunkId]||chunkId) + \".bundle.1528066777683.js\";\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tfunction onScriptComplete(event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\tvar error = new Error('Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')');\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\thead.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/dist/js/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = this[\"webpackJsonp\"] = this[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([22,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mitt from 'mitt'\n\nconst eventBus = mitt()\n\nexport default eventBus\n","/*\n\tNames for the events emiitted through the route class\n\n\tThe names should be pretty self explanatory \n*/\n\nexport const ROUTER_POP_EVENT = 'ROUTER_POP_EVENT'\n\nexport const ROUTE_LINK_CLICKED = 'ROUTE_LINK_CLICKED'\n\nexport const ROUTE_TRANSITION_LOAD = 'ROUTE_TRANSITION_LOAD'\n\nexport const ROUTE_TRANSITION_EXIT = 'ROUTE_TRANSITION_EXIT'\n\nexport const ROUTE_TRANSITION_RESOLVED = 'ROUTE_TRANSITION_RESOLVED'\n\nexport const ROUTE_TRANSITION_BEFORE_DOM_UPDATE =\n\t'ROUTE_TRANSITION_BEFORE_DOM_UPDATE'\n\nexport const ROUTE_TRANSITION_AFTER_DOM_UPDATE =\n\t'ROUTE_TRANSITION_AFTER_DOM_UPDATE'\n\nexport const ROUTE_TRANSITION_ENTER = 'ROUTE_TRANSITION_ENTER'\n\nexport const ROUTE_TRANSITION_COMPLETE = 'ROUTE_TRANSITION_COMPLETE'\n","import * as R from 'ramda'\n\n// Does this need any comments?\n\nconst sanitizeName = name => name.replace(/-(.)/g, ($0, $1) => $1.toUpperCase())\n\nconst removeValueLess = R.filter(({ value }) => value)\n\nconst getDataAttributes = R.filter(\n\tattr =>\n\t\t/^data-/.test(attr.name) &&\n\t\tattr.name !== 'data-element' &&\n\t\tattr.name !== 'data-behaviour'\n)\n\nconst cleanName = R.map(({ name, value }) => ({\n\tname: sanitizeName(name.substr(5)),\n\tvalue\n}))\n\nconst flattenToObject = R.reduce((acc, { name: key, value }) => {\n\tacc[key] = value\n\treturn acc\n}, {})\n\nexport const composeProps = R.compose(\n\tflattenToObject,\n\tcleanName,\n\tremoveValueLess,\n\tgetDataAttributes\n)\n\nconst gatherProps = node => composeProps([...node.attributes])\n\nconst createRefs = R.reduce((acc, node) => {\n\tacc[`${sanitizeName(node.getAttribute('data-element'))}`] = {\n\t\tnode: node,\n\t\t...gatherProps(node)\n\t}\n\n\treturn acc\n}, {})\n\nexport default root => createRefs([...root.querySelectorAll('*[data-element]')])\n","import Delegate from 'dom-delegate'\nimport * as R from 'ramda'\n\nexport default R.curry(function(context, obj) {\n\tconst events = Object.entries(obj).map(([key, fn]) => {\n\t\tconst eventAndNode = R.compose(R.map(R.trim), R.split(' '))(key)\n\t\tconst capture = !!R.compose(R.length, R.match(/mouse/g), R.head)(\n\t\t\teventAndNode\n\t\t)\n\t\tconst funk = typeof fn === 'string' ? this[fn] : fn\n\t\treturn [...eventAndNode, funk, capture]\n\t})\n\n\tlet $delegate\n\tlet emit\n\n\tconst handleFunctions = R.curry((evt, transform, fns) => {\n\t\tR.compose(\n\t\t\tR.forEach(event => $delegate[transform](...event)),\n\t\t\tR.map(item => {\n\t\t\t\treturn R.find(([a, b]) => [a, b].join(' ') === item)(evt)\n\t\t\t})\n\t\t)(fns)\n\t})(events)\n\n\treturn {\n\t\tattachAll() {\n\t\t\t$delegate = $delegate || new Delegate(context)\n\t\t\ttry {\n\t\t\t\tR.forEach(event => $delegate.on(...event))(events)\n\t\t\t} catch (err) {\n\t\t\t\tconsole.error(\n\t\t\t\t\t'Handler must be a type of Function, careful with arrow functions, they will need to be above the events object:',\n\t\t\t\t\terr\n\t\t\t\t)\n\t\t\t}\n\t\t},\n\n\t\tattach(fns) {\n\t\t\t$delegate = $delegate || new Delegate(context)\n\t\t\thandleFunctions('on', fns)\n\t\t},\n\n\t\tremove(fns) {\n\t\t\tif (!$delegate) return\n\t\t\thandleFunctions('off', fns)\n\t\t},\n\n\t\tdestroy() {\n\t\t\tif (!$delegate) return\n\t\t\tR.forEach(event => $delegate.off(...event))(events)\n\t\t},\n\n\t\temit($node, event) {\n\t\t\temit = emit || document.createEvent('HTMLEvents')\n\t\t\temit.initEvent(event, true, false)\n\t\t\t$node.dispatchEvent(emit)\n\t\t}\n\t}\n})\n","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"3a5cfd76ba86a7146225.worker.js\");\n};","import * as R from 'ramda'\n\n/**\n *\n * @function loader\n *\n * @param :promise -> behaviour => import(`@/behaviours/${behaviour}`)\n *\n * @return :object\n *\n */\n\nexport default function loader(fn) {\n\tconst state = {\n\t\tstack: [],\n\t\tscope: []\n\t}\n\n\t// get all of the data-behaviour props\n\t// return an array of behaviour objects\n\tconst gatherBehaviours = R.compose(\n\t\tR.map(({ node, behaviour }) => {\n\t\t\treturn new Promise(resolve => {\n\t\t\t\tfn(behaviour).then(resp => {\n\t\t\t\t\tresolve({\n\t\t\t\t\t\tid: behaviour,\n\t\t\t\t\t\tnode,\n\t\t\t\t\t\tbehaviour: resp.default\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t})\n\t\t}),\n\t\tR.flatten,\n\t\tR.map(node => {\n\t\t\treturn R.compose(\n\t\t\t\tR.map(behaviour => ({\n\t\t\t\t\tbehaviour,\n\t\t\t\t\tnode\n\t\t\t\t})),\n\t\t\t\tR.split(' '),\n\t\t\t\tR.replace(/^\\s+|\\s+$|\\s+(?=\\s)/g, '')\n\t\t\t)(node.getAttribute('data-behaviour'))\n\t\t})\n\t)\n\n\t/**\n\t * @public\n\t *\n\t * Get data behaviours and instantiate\n\t *\n\t * @function hydrate\n\t *\n\t * @param :HTMLElement\n\t * @param :string - css selector\n\t *\n\t * @return :object\n\t *\n\t */\n\tfunction hydrate(context, wrapper = '#page-wrapper') {\n\t\treturn Promise.all(\n\t\t\tgatherBehaviours([...context.querySelectorAll('*[data-behaviour]')])\n\t\t).then(data => {\n\t\t\tconst stack = R.compose(\n\t\t\t\tR.map(({ behaviour: Behaviour, node, id }) => {\n\t\t\t\t\tconst fn = new Behaviour(node, id)\n\t\t\t\t\tfn.init()\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tfn.mount()\n\t\t\t\t\t})\n\t\t\t\t\tconst destroy = node.closest(wrapper)\n\t\t\t\t\treturn { fn, destroy, id }\n\t\t\t\t})\n\t\t\t)(data)\n\n\t\t\tconst scope = R.compose(\n\t\t\t\t//R.filter(({ fn }) => typeof fn === 'function'),\n\t\t\t\tR.filter(item => item.destroy)\n\t\t\t)(stack)\n\n\t\t\tObject.assign(state, { stack, scope })\n\n\t\t\treturn state\n\t\t})\n\t}\n\n\t/**\n\t * @public\n\t *\n\t * destroy the behaviours\n\t *\n\t * @function unmount\n\t *\n\t * @return voide\n\t *\n\t */\n\tfunction unmount() {\n\t\tR.compose(\n\t\t\tR.map(({ fn }) => {\n\t\t\t\tfn.destroy()\n\t\t\t})\n\t\t)(state.scope)\n\t}\n\n\treturn {\n\t\thydrate,\n\t\tunmount\n\t}\n}\n","import * as R from 'ramda'\n\nexport const removeSpecialCharacters = R.compose(\n\tR.trim,\n\tR.replace(/\\s+/g, ' '),\n\tR.replace(/[^a-zA-Z\\d\\s:]/g, '')\n)\n\nexport const pascalify = R.memoizeWith(R.identity, str => {\n\treturn R.compose(\n\t\tR.join(''),\n\t\tR.over(R.lensIndex(0))(R.toUpper),\n\t\tR.replace(/[\\s]+(.)?/g, (match, ch) => (ch ? R.toUpper(ch) : '')),\n\t\tR.toLower,\n\t\tremoveSpecialCharacters\n\t)(str)\n})\n\nexport const camelify = R.memoizeWith(R.identity, str => {\n\treturn R.compose(\n\t\tR.replace(/[\\s]+(.)?/g, (match, ch) => (ch ? R.toUpper(ch) : '')),\n\t\tR.toLower,\n\t\tremoveSpecialCharacters\n\t)(str)\n})\n\nexport const slugify = R.memoizeWith(R.identity, str => {\n\treturn R.compose(\n\t\tR.replace(/[\\s]+(.)?/g, (match, ch) => (ch ? `-${R.toLower(ch)}` : '')),\n\t\tR.toLower,\n\t\tremoveSpecialCharacters\n\t)(str)\n})\n\nexport const snakeify = R.memoizeWith(R.identity, str => {\n\treturn R.compose(\n\t\tR.replace(/[\\s]+(.)?/g, (match, ch) => (ch ? `_${R.toLower(ch)}` : '')),\n\t\tR.toLower,\n\t\tremoveSpecialCharacters\n\t)(str)\n})\n\nexport const segmentize = R.compose(\n\tR.filter(R.identity),\n\tR.split('/'),\n\tR.replace(/(^\\/+|\\/+$)/g, '')\n)\n\nexport const beautifyPath = R.compose(R.join('/'), segmentize)\n\nexport const slugFromPath = R.compose(R.last, segmentize)\n","/***\n * Cache object\n *\n * @return :object\n */\nconst cache = (() => {\n\t/*\n\t\tThe cache... html responses from ajax requests get stored here\n\t\tWe should probably put a limit on it!\n\t*/\n\tconst cache = {}\n\n\treturn {\n\t\t/***\n\t\t * set('string', value)\n\t\t *\n\t\t * set an item into the cache\n\t\t *\n\t\t * @param :string, :any\n\t\t *\n\t\t * @return void\n\t\t */\n\t\tset(key, value) {\n\t\t\tcache[key] = value\n\t\t},\n\n\t\t/***\n\t\t * get('string')\n\t\t *\n\t\t * set an item into the cache\n\t\t *\n\t\t * @param :string\n\t\t *\n\t\t * @return :any\n\t\t */\n\t\tget(key) {\n\t\t\treturn cache[key]\n\t\t}\n\t}\n})()\n\nexport default cache\n","import * as R from 'ramda'\nimport { segmentize, beautifyPath, slugFromPath } from '@/core/utils/strings'\nimport cache from '@/core/router/cache'\n/**\n * credit:\n *\n * https://github.com/luruke/barba.js/blob/master/src/Pjax/Pjax.js\n *\n */\nexport const preventClick = (evt, element) => {\n\tconst { href } = element\n\tif (!element || !href) return false\n\n\t//Middle click, cmd click, and ctrl click\n\tif (evt.which > 1 || evt.metaKey || evt.ctrlKey || evt.shiftKey || evt.altKey)\n\t\treturn\n\n\t//Ignore target with _blank target\n\tif (element.target && element.target === '_blank') return\n\n\t//Check if it's the same domain\n\tif (\n\t\twindow.location.protocol !== element.protocol ||\n\t\twindow.location.hostname !== element.hostname\n\t)\n\t\treturn\n\n\t//Check if the port is the same\n\n\t//Ignore case when a hash is being tacked on the current URL\n\tif (href.indexOf('#') > -1) return\n\n\t//Ignore case where there is download attribute\n\tif (\n\t\telement.getAttribute &&\n\t\ttypeof element.getAttribute('download') === 'string'\n\t)\n\t\treturn\n\n\tif (element.classList.contains('nope')) return\n\n\treturn true\n}\n\nexport const getLinks = R.compose(\n\tR.filter(\n\t\tpathname => pathname !== window.location.pathname && !cache.get(pathname)\n\t),\n\tR.map(R.prop('pathname')),\n\tR.filter(link => !preventClick({}, link.pathname))\n)\n\nexport const activeLinks = (() => {\n\tlet previous\n\tlet $anchors = []\n\n\tconst defaultClasses = {\n\t\tmatch: 'is-current',\n\t\troot: 'is-current-root',\n\t\tparent: 'is-current-parent'\n\t}\n\n\treturn ({ scope, classes }) => {\n\t\t$anchors = scope\n\n\t\tconst classNames = {\n\t\t\t...defaultClasses,\n\t\t\t...classes\n\t\t}\n\n\t\treturn path => {\n\t\t\tconst testSegments = segmentize(path)\n\n\t\t\tif (previous) {\n\t\t\t\tR.forEach(({ node, className }) => {\n\t\t\t\t\tif (classNames[className]) {\n\t\t\t\t\t\tnode.classList.remove(classNames[className])\n\t\t\t\t\t}\n\t\t\t\t})(previous)\n\n\t\t\t\tprevious = []\n\t\t\t}\n\n\t\t\tprevious = R.compose(\n\t\t\t\tR.forEach(({ node, className }) => {\n\t\t\t\t\tif (classNames[className]) {\n\t\t\t\t\t\tnode.classList.add(classNames[className])\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\tR.reduce((acc, [, value]) => {\n\t\t\t\t\tacc.push(...value)\n\t\t\t\t\treturn acc\n\t\t\t\t}, []),\n\t\t\t\tObject.entries,\n\t\t\t\tR.map(item => {\n\t\t\t\t\treturn R.compose(\n\t\t\t\t\t\tR.filter(({ segments, matchAgainst }) => {\n\t\t\t\t\t\t\treturn matchAgainst === R.join('/', segments)\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tR.map(node => {\n\t\t\t\t\t\t\tconst { pathname } = node\n\t\t\t\t\t\t\tconst segments = segmentize(pathname)\n\t\t\t\t\t\t\tconst length = R.length(segments)\n\t\t\t\t\t\t\tconst matchAgainst = R.compose(R.join('/'), R.take(length))(\n\t\t\t\t\t\t\t\ttestSegments\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tnode,\n\t\t\t\t\t\t\t\tsegments,\n\t\t\t\t\t\t\t\tmatchAgainst,\n\t\t\t\t\t\t\t\tclassName:\n\t\t\t\t\t\t\t\t\tbeautifyPath(pathname) === path\n\t\t\t\t\t\t\t\t\t\t? 'match'\n\t\t\t\t\t\t\t\t\t\t: length === 1 ? 'root' : 'parent'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t)(item)\n\t\t\t\t}),\n\t\t\t\tR.groupBy(({ pathname }) => segmentize(pathname).length),\n\t\t\t\tR.filter(item => {\n\t\t\t\t\tconst { pathname } = item\n\t\t\t\t\tconst segments = segmentize(pathname)\n\t\t\t\t\treturn (\n\t\t\t\t\t\tR.head(segments) === R.head(testSegments) &&\n\t\t\t\t\t\tsegments.length <= testSegments.length\n\t\t\t\t\t)\n\t\t\t\t})\n\t\t\t)($anchors)\n\n\t\t\tlog(previous)\n\t\t}\n\t}\n})()\n","import createHistory from 'history/createBrowserHistory'\nimport eventBus from '@/core/modules/eventBus'\nimport * as Action from '@/core/router/actions'\n\n/***\n *\n * Create a history listener and listen for stuff\n *\n * @return object\n */\nconst historyManager = (() => {\n\t// create a new history instance\n\tconst history = createHistory()\n\n\t// listen to any history changes\n\thistory.listen((location, action) => {\n\t\tconst { pathname, state } = location\n\t\t// if 'POP'... i.e forward/backward\n\t\t// emit the event\n\t\tif (action === 'POP') {\n\t\t\teventBus.emit(Action.ROUTER_POP_EVENT, { pathname, state })\n\t\t}\n\t})\n\n\treturn {\n\t\t/*\n\t\t\trefactor alert yo!\n\t\t*/\n\t\tstore: {\n\t\t\tfrom: '',\n\t\t\tto: ''\n\t\t},\n\n\t\t/*\n\t\t\twrapper function\n\t\t\t\n\t\t\teg: history.push('/home', { some: 'state' })\n\t\t*/\n\t\tpush(...args) {\n\t\t\thistory.push(...args)\n\t\t}\n\t}\n})()\n\nexport default historyManager\n","import cache from '@/core/router/cache'\n\n/***\n * request function... ajax or cache\n *\n * @param :string - the pathname\n * @param :object - any fetch options\n * @param :string - the type of response transofmr\n *\n * @return :promise\n */\n\nexport default (pathname, options = {}, type = 'text') => {\n\treturn new Promise((resolve, reject) => {\n\t\t// are we in the cache... yeah... get me and return\n\t\tif (cache.get(pathname)) {\n\t\t\t// log('from cache')\n\t\t\t// pass the response object back...\n\t\t\t// cos.. yeah... might want it\n\t\t\tresolve(cache.get(pathname))\n\t\t\treturn\n\t\t}\n\n\t\t// no cache... lets fetch it\n\n\t\t/***\n\t\t * native fetch\n\t\t *\n\t\t * @param :string - the pathname\n\t\t * @param :object - any fetch options\n\t\t *\n\t\t * @return :promise\n\t\t */\n\t\tfetch(pathname, options)\n\t\t\t.then(response => {\n\t\t\t\tconst { ok, status, url } = response\n\n\t\t\t\t// things are not so good....\n\t\t\t\tif (!ok || status !== 200) {\n\t\t\t\t\t// object to hold all that went wrong\n\t\t\t\t\tconst resp = {\n\t\t\t\t\t\tdata: false,\n\t\t\t\t\t\tok,\n\t\t\t\t\t\tstatus,\n\t\t\t\t\t\turl\n\t\t\t\t\t}\n\t\t\t\t\t// set the failed failed shiz into the cache ??? why... [RETHINk] ?\n\t\t\t\t\tcache.set(pathname, resp)\n\t\t\t\t\t// reject.. with out fancy error object\n\t\t\t\t\treject(resp)\n\n\t\t\t\t\t// bail..\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t// return the response transform\n\t\t\t\t// i.e. for html response.html(), or json: response.json()\n\t\t\t\treturn response[type]()\n\t\t\t})\n\t\t\t.then(data => {\n\t\t\t\t// we have the goodies\n\t\t\t\t// add it to the cache\n\t\t\t\tcache.set(pathname, {\n\t\t\t\t\tdata\n\t\t\t\t})\n\t\t\t\t// we are done here... pass the response on\n\t\t\t\tresolve(data)\n\t\t\t})\n\t})\n}\n","import pathToRegexp from 'path-to-regexp'\nimport { segmentize, beautifyPath, slugFromPath } from '@/core/utils/strings'\n/**\n * extracts meta data from urls (queries, hash, host, et al)\n *\n * @function parseUri\n *\n * @param :string url\n *\n * @return :object\n */\nexport function parseUri(str) {\n\tlet o = parseUri.options,\n\t\tm = o.parser[o.strictMode ? 'strict' : 'loose'].exec(str),\n\t\turi = {},\n\t\ti = 14\n\n\twhile (i--) uri[o.key[i]] = m[i] || '' // eslint-disable-line\n\n\turi[o.q.name] = {}\n\turi[o.key[12]].replace(o.q.parser, function($0, $1, $2) {\n\t\tif ($1) uri[o.q.name][$1] = $2\n\t})\n\n\treturn uri\n}\n\nparseUri.options = {\n\tstrictMode: false,\n\tkey: [\n\t\t'source',\n\t\t'protocol',\n\t\t'authority',\n\t\t'userInfo',\n\t\t'user',\n\t\t'password',\n\t\t'host',\n\t\t'port',\n\t\t'relative',\n\t\t'path',\n\t\t'directory',\n\t\t'file',\n\t\t'query',\n\t\t'anchor'\n\t],\n\tq: {\n\t\tname: 'queryKey',\n\t\tparser: /(?:^|&)([^&=]*)=?([^&]*)/g\n\t},\n\tparser: {\n\t\tstrict: /^(?:([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?((((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,\n\t\tloose: /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/\n\t}\n}\n\n/**\n *\n * @function createPathObject\n *\n * @param :object pathToRegexp options\n *\n * @return :function\n */\nfunction createPathObject(options) {\n\toptions = options || {}\n\n\t/**\n\t *\n\t * @param :string the test path\n\t *\n\t * @return :function\n\t */\n\treturn function(path) {\n\t\tlet keys = []\n\t\tlet re = pathToRegexp(path, keys, options)\n\n\t\t/**\n\t\t * @param :string // the url you want to match\n\t\t * @param :object\n\t\t *\n\t\t * @return :object / :boolean\n\t\t */\n\t\treturn function(pathname, params) {\n\t\t\tlet m = re.exec(pathname)\n\t\t\tif (!m) return false\n\n\t\t\tparams = params || {}\n\n\t\t\tlet key, param\n\t\t\tfor (let i = 0; i < keys.length; i += 1) {\n\t\t\t\tkey = keys[i]\n\t\t\t\tparam = m[i + 1]\n\t\t\t\tif (!param) continue\n\t\t\t\tparams[key.name] = decodeParam(param)\n\t\t\t\tif (key.repeat) params[key.name] = params[key.name].split(key.delimiter)\n\t\t\t}\n\n\t\t\treturn params\n\t\t}\n\t}\n}\n\nfunction decodeParam(param) {\n\ttry {\n\t\treturn decodeURIComponent(param)\n\t} catch (_) {\n\t\tconsole.error('decodeParam error')\n\t}\n}\n\n/**\n *\n * @function matchRoute\n *\n * @return :function\n */\nexport const matchRoute = createPathObject({\n\t// path-to-regexp options\n\tsensitive: false,\n\tstrict: false,\n\tend: false\n})\n\n/**\n *\n * @function parseUrl\n *\n * @param :string url...\n *\n * @return :object\n */\nexport const parseUrl = href => {\n\tconst { anchor: hash, host, path, queryKey, source } = parseUri(href)\n\n\treturn {\n\t\tisRoot: path === '/' ? true : false,\n\t\tpath: beautifyPath(path),\n\t\tsegments: segmentize(path),\n\t\tslug: slugFromPath(path),\n\t\thash,\n\t\thost,\n\t\tsource,\n\t\tquery: queryKey\n\t}\n}\n","import pathToRegexp from 'path-to-regexp'\nimport * as R from 'ramda'\nimport { matchRoute, parseUrl } from './parseUrl'\nimport * as str from '@/core/utils/strings'\n\n/**\n * flattens the routes into a single flat array\n *\n * @function flattenRoutes\n *\n * @param :array\n *\n * @return :array\n */\n\nexport const flattenRoutes = R.reduce((acc, curr) => {\n\tconst { path: tmpPath, children, ...rest } = curr\n\tlet tmp = []\n\n\tconst path = tmpPath\n\n\ttmp.push({ path: str.beautifyPath(tmpPath), ...rest })\n\n\tif (children) {\n\t\tconst items = Array.isArray(children) ? children : [children]\n\t\ttmp.push(...mapChildren(path)(items))\n\t}\n\n\tacc.push(...tmp)\n\n\treturn acc\n}, [])\n\n/**\n * recursively loop over any route children\n * returns a functions that expects an array of routes\n *\n * @function mapChildren\n *\n * @param :string\n *\n * @return :function\n */\nfunction mapChildren(base) {\n\treturn R.compose(\n\t\tR.flatten,\n\t\tR.map(({ children, path, ...rest }) => {\n\t\t\tconst container = []\n\t\t\tconst tmpPath = path ? str.beautifyPath(`${base}${path}`) : ':regex'\n\n\t\t\tcontainer.push({\n\t\t\t\tpath: tmpPath,\n\t\t\t\tpattern: typeof path === 'string' ? false : path,\n\t\t\t\tparent: str.beautifyPath(base),\n\t\t\t\t...rest\n\t\t\t})\n\n\t\t\tif (children) {\n\t\t\t\tconst items = Array.isArray(children) ? children : [children]\n\t\t\t\tcontainer.push(mapChildren(`${base}${path}`)(items))\n\t\t\t}\n\t\t\treturn container\n\t\t})\n\t)\n}\n\n/**\n * finds all the route matches\n * gives each match a score\n * returns the route with the best score\n *\n * @function matches\n *\n * @param :array\n * @param :string\n * @param :object\n *\n * @return :object\n */\nconst matches = (routes, data) => {\n\tconst { path: slug } = data\n\n\treturn R.compose(\n\t\tR.reverse,\n\t\tR.sortBy(R.prop('score')),\n\t\tR.map(({ path, pattern, ...rest }) => {\n\t\t\tconst last = str.slugFromPath(slug)\n\t\t\tconst slugLength = str.segmentize(slug).length\n\t\t\tconst pathLength = str.segmentize(path).length\n\t\t\tlet score = 1\n\t\t\tlet pageNo = null\n\n\t\t\t// exact match?\n\t\t\tif (str.beautifyPath(slug) === path) {\n\t\t\t\tscore = 5\n\t\t\t} else {\n\t\t\t\t// pattern, and the last segment matches the regexp\n\t\t\t\tif (pattern && pathToRegexp(pattern).exec(last)) {\n\t\t\t\t\tscore = 4\n\t\t\t\t\t// get the page number\n\t\t\t\t\tpageNo = R.compose(parseInt, R.head, R.match(/\\d+/g))(last)\n\t\t\t\t} else if (slugLength === pathLength) {\n\t\t\t\t\tscore = 3\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn { path, score, pattern, pageNo, params: data, ...rest }\n\t\t}),\n\t\tR.filter(({ path }) => {\n\t\t\treturn matchRoute(path)(str.beautifyPath(slug))\n\t\t})\n\t)(routes)\n}\n\nexport const findRoute = routes => {\n\tconst routeMap = flattenRoutes(routes)\n\treturn url => {\n\t\tconst data = parseUrl(url)\n\t\tconst { isRoot } = data\n\n\t\tif (isRoot) {\n\t\t\treturn {\n\t\t\t\t...R.find(R.propEq('path', '/'))(routes),\n\t\t\t\tparams: data\n\t\t\t}\n\t\t}\n\n\t\tconst match = R.head(matches(routeMap, data))\n\n\t\tif (match) {\n\t\t\treturn match\n\t\t}\n\n\t\treturn {\n\t\t\t...R.find(R.propEq('path', '*'))(routes),\n\t\t\tparams: data\n\t\t}\n\t}\n}\n\n// const find = findRoute(routes)\n\n// find('https://www.our.com/a/p2?test=hello#terry') // ?\n","import { findRoute } from '@/core/router/utils/paths'\nimport baseTransition from '@/core/router/transition'\nimport request from '@/core/router/request'\nimport cache from '@/core/router/cache'\nimport historyManager from '@/core/router/history'\nimport eventBus from '@/core/modules/eventBus'\nimport * as Action from '@/core/router/actions'\nimport domify from 'domify'\n\n/***\n * native lifecycle\n *\n * @return :object\n */\nconst lifecycle = (() => {\n\t/*\n\t\tsetup to vars to share\n\t*/\n\tlet matchRoute\n\tlet exitTransition = {}\n\tlet enterTransition = {}\n\tlet wrapper\n\n\treturn {\n\t\t/***\n\t\t *\n\t\t * The routes structure is gonna need a rewrite so...\n\t\t * suject to change...\n\t\t *\n\t\t * at the moment we're returing a functiona storing\n\t\t * it on the matchRoute var\n\t\t *\n\t\t * @function addRoutes\n\t\t * @param :array\n\t\t *\n\t\t * @return :lifecycle\n\t\t */\n\n\t\taddRoutes(routesObject) {\n\t\t\tmatchRoute = findRoute(routesObject)\n\n\t\t\t// update the from history store.... <REWITE></REWITE>\n\t\t\thistoryManager.store.from = matchRoute(window.location.pathname)\n\n\t\t\treturn this\n\t\t},\n\n\t\t/***\n\t\t *\n\t\t * assign the default wrapper...\n\t\t *\n\t\t * i'm thinking this could be overwritten on a route basis\n\t\t *\n\t\t * @function setWrapper\n\t\t * @param :HTMLElement\n\t\t *\n\t\t * @return :lifecycle\n\t\t */\n\t\tsetWrapper(node) {\n\t\t\t// assign the node to the wrapper var\n\t\t\twrapper = node\n\n\t\t\treturn this\n\t\t},\n\n\t\t/***\n\t\t *\n\t\t * This function is called once upon load\n\t\t *\n\t\t * @function setWrapper\n\t\t * @param :string -> the pathname yeah: /blog/terry\n\t\t *\n\t\t * @return :lifecycle\n\t\t */\n\t\tonLoad(pathname) {\n\t\t\t// get the new route object\n\t\t\tconst newState = matchRoute(pathname)\n\n\t\t\t// combine the transition methods\n\t\t\tconst fn = Object.assign({}, baseTransition, newState.view)\n\n\t\t\t// all the onLoad method\n\t\t\tfn.onLoad(newState)\n\n\t\t\t// emit this bad boy\n\t\t\teventBus.emit(Action.ROUTE_TRANSITION_LOAD, newState)\n\n\t\t\treturn this\n\t\t},\n\n\t\t/***\n\t\t *\n\t\t * This is the main thing... from/request/to etc... all here\n\t\t *\n\t\t * @function transition\n\t\t * @param :string\n\t\t *\n\t\t * @return :lifecycle\n\t\t */\n\t\ttransition({ pathname, action, transition: trans, dataAttrs }) {\n\t\t\t// get the new route object\n\t\t\tconst newState = matchRoute(pathname)\n\t\t\t// have we been supplice with a transition object... no.. use the route one\n\t\t\tconst view = trans ? trans : newState.view\n\n\t\t\t// update the from history store.... <REWITE></REWITE>\n\t\t\thistoryManager.store.to = newState\n\n\t\t\t// combine the transition methods for exit... basic + route exits\n\t\t\texitTransition = Object.assign(\n\t\t\t\t{},\n\t\t\t\tbaseTransition,\n\t\t\t\thistoryManager.store.from.view\n\t\t\t)\n\n\t\t\t// combine the transition methods for exit... basic + route enters\n\t\t\tenterTransition = Object.assign({}, baseTransition, view)\n\n\t\t\t// setup the props to be passed to onExit and onExitComplete\n\t\t\tconst exitProps = {\n\t\t\t\t...historyManager.store,\n\t\t\t\twrapper,\n\t\t\t\toldHtml: document.querySelector(exitTransition.el),\n\t\t\t\taction,\n\t\t\t\tdataAttrs\n\t\t\t}\n\n\t\t\t/***\n\t\t\t *\n\t\t\t * promise function... does a thing.. returns a transiton promise\n\t\t\t *\n\t\t\t * @function promise\n\t\t\t * @param :string\n\t\t\t * @param :object\n\t\t\t * @param :striobjectng\n\t\t\t *\n\t\t\t * @return :lifecycle\n\t\t\t */\n\t\t\tconst promise = (method, transition, props = {}) =>\n\t\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\t\ttransition[method]({\n\t\t\t\t\t\tnext: resolve,\n\t\t\t\t\t\tonError: reject,\n\t\t\t\t\t\t...props\n\t\t\t\t\t})\n\t\t\t\t})\n\n\t\t\t// we have requested exit... emit\n\t\t\teventBus.emit(Action.ROUTE_TRANSITION_EXIT, exitProps)\n\n\t\t\t// now... lets do the promise funk\n\t\t\treturn (\n\t\t\t\tPromise.all([\n\t\t\t\t\tpromise('onExit', exitTransition, exitProps),\n\t\t\t\t\trequest(pathname)\n\t\t\t\t])\n\t\t\t\t\t// the second request returns a response\n\t\t\t\t\t// get it\n\t\t\t\t\t.then(([, resp]) => {\n\t\t\t\t\t\t// more event emiiting\n\t\t\t\t\t\teventBus.emit(Action.ROUTE_TRANSITION_RESOLVED, exitProps)\n\n\t\t\t\t\t\t// get the data, assign to markup\n\t\t\t\t\t\tconst { data: markup } = cache.get(pathname)\n\n\t\t\t\t\t\t// do we have errors...\n\t\t\t\t\t\tif (resp.data && resp.data.data === false) {\n\t\t\t\t\t\t\t// emit the error method\n\t\t\t\t\t\t\texitTransition.onError({ ...exitProps, ...resp })\n\t\t\t\t\t\t\t// window.location.pathname = pathname\n\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// conver the response html into something we can work with\n\t\t\t\t\t\tconst html = domify(markup)\n\n\t\t\t\t\t\t// get the title, and give it a clean\n\t\t\t\t\t\tconst title = html.querySelector('title').textContent.trim()\n\n\t\t\t\t\t\t// query the new newHtml for the selector defined on\n\t\t\t\t\t\t// this object... default = '.page-child'\n\t\t\t\t\t\tconst newHtml = html.querySelector(enterTransition.el)\n\n\t\t\t\t\t\t// props object passed to each after method\n\t\t\t\t\t\tconst props = {\n\t\t\t\t\t\t\toldHtml: document.querySelector(exitTransition.el),\n\t\t\t\t\t\t\twrapper,\n\t\t\t\t\t\t\tnewHtml,\n\t\t\t\t\t\t\ttitle,\n\t\t\t\t\t\t\thtml,\n\t\t\t\t\t\t\t...historyManager.store,\n\t\t\t\t\t\t\taction\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// check... do we want to unmount the previous html\n\t\t\t\t\t\tconst shouldUnmount = enterTransition.shouldUnmount(props)\n\n\t\t\t\t\t\t// if we do... sure... unmount event\n\t\t\t\t\t\tshouldUnmount &&\n\t\t\t\t\t\t\teventBus.emit(Action.ROUTE_TRANSITION_BEFORE_DOM_UPDATE, props)\n\n\t\t\t\t\t\t// update the dom method\n\t\t\t\t\t\tenterTransition.updateDom(props)\n\n\t\t\t\t\t\t// emit update event\n\t\t\t\t\t\teventBus.emit(Action.ROUTE_TRANSITION_AFTER_DOM_UPDATE, props)\n\n\t\t\t\t\t\t// no proms here.. just call this method\n\t\t\t\t\t\texitTransition.onAfterExit(props)\n\n\t\t\t\t\t\t// return that props object we made earlier\n\t\t\t\t\t\treturn props\n\t\t\t\t\t})\n\t\t\t\t\t.then(props => {\n\t\t\t\t\t\t// we have props...\n\t\t\t\t\t\t// it's possible we don't, we could have bailed early\n\t\t\t\t\t\tif (props) {\n\t\t\t\t\t\t\t// enter props\n\t\t\t\t\t\t\tconst enterProps = {\n\t\t\t\t\t\t\t\t...props,\n\t\t\t\t\t\t\t\t...historyManager.store,\n\t\t\t\t\t\t\t\taction\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t// emit some more\n\t\t\t\t\t\t\teventBus.emit(Action.ROUTE_TRANSITION_ENTER, enterProps)\n\n\t\t\t\t\t\t\t// cycle through the enter methods\n\t\t\t\t\t\t\tpromise('onEnter', enterTransition, enterProps).then(() => {\n\t\t\t\t\t\t\t\tenterTransition.onAfterEnter(enterProps)\n\n\t\t\t\t\t\t\t\t// update the from history store.... <REWITE></REWITE>\n\t\t\t\t\t\t\t\thistoryManager.store.from = newState\n\t\t\t\t\t\t\t\teventBus.emit(Action.ROUTE_TRANSITION_COMPLETE, enterProps)\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn props\n\t\t\t\t\t})\n\t\t\t)\n\t\t}\n\t}\n})()\n\nexport default lifecycle\n","export default {\n\tel: '.page-child',\n\n\tonLoad(props) {\n\t\tconsole.info('onLoad', props)\n\t},\n\n\tshouldUnmount() {\n\t\treturn true\n\t},\n\n\tonError: props => {\n\t\tconsole.warn('error loading page', props)\n\t},\n\n\tupdateDom({ wrapper, newHtml, title }) {\n\t\twrapper.innerHTML = ''\n\t\twrapper.appendChild(newHtml)\n\t\tdocument.title = title\n\n\t\treturn true // return true to unmount previous html\n\t},\n\n\tonExit({ next, action, from, to }) {\n\t\t// console.table({ from: from.data.path, to: to.data.path, action }) // eslint-disable-line\n\t\tnext()\n\t},\n\n\tonAfterExit() {},\n\n\tonEnter({ next }) {\n\t\tnext()\n\t},\n\n\tonAfterEnter() {}\n}\n","import * as R from 'ramda'\nimport createEvents from '@/core/modules/createEvents'\nimport eventBus from '@/core/modules/eventBus'\nimport { composeProps } from '@/core/modules/refs'\nimport { preventClick, getLinks, activeLinks } from '@/core/router/utils/links'\nimport historyManager from '@/core/router/history'\nimport cache from '@/core/router/cache'\nimport request from '@/core/router/request'\nimport lifecycle from '@/core/router/lifecycle'\nimport Worker from '@/core/router/fetch.worker.js'\nimport * as Action from '@/core/router/actions'\n\nexport default (() => {\n\t// setup a worker\n\tconst worker = new Worker()\n\n\tconst defaultRoutes = [\n\t\t{\n\t\t\tpath: '/',\n\t\t\tview: {}\n\t\t},\n\t\t{\n\t\t\tpath: '*',\n\t\t\tview: {}\n\t\t}\n\t]\n\n\t// add listen to events...\n\tworker.addEventListener('message', function({ data }) {\n\t\t// should probably check what i'm getting here\n\t\t// but... alpha... we're getting html responses\n\t\tdata.forEach(({ key, data }) => {\n\t\t\tcache.set(key, { data })\n\t\t})\n\t})\n\n\t/***\n\t *@class Router\n\t * @param :object\n\t *\n\t * @return Router\n\t */\n\treturn class Router {\n\t\tconstructor({ routes, rootNode, navLinks, classes }) {\n\t\t\t// bootup the lifecycle\n\t\t\tlifecycle\n\t\t\t\t.addRoutes(routes || defaultRoutes)\n\t\t\t\t.setWrapper(rootNode)\n\t\t\t\t.onLoad(window.location.pathname)\n\n\t\t\t// the root node... ?? configurable at the route level\n\t\t\tthis.$wrapper = rootNode\n\t\t\tthis.$links = activeLinks({ scope: navLinks, classes: classes })\n\n\t\t\t// set the dom events\n\t\t\tthis.$events = createEvents.call(this, document, {\n\t\t\t\t'click a': 'onClick',\n\t\t\t\t'mouseover a': 'onMouseEnter'\n\t\t\t})\n\n\t\t\treturn this\n\t\t}\n\n\t\t/***\n\t\t * @static goTo\n\t\t * @param :object\n\t\t *\n\t\t * @return void\n\t\t */\n\t\tstatic goTo = ({ pathname, action, dataAttrs }, transition) => {\n\t\t\tlifecycle\n\t\t\t\t.transition({ pathname, action, transition, dataAttrs })\n\t\t\t\t.then(({ action }) => {\n\t\t\t\t\tif (action === 'PUSH') {\n\t\t\t\t\t\thistoryManager.push(pathname, { attr: dataAttrs })\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t}\n\n\t\tonMouseEnter = (e, elm) => {\n\t\t\tconst { pathname } = elm\n\t\t\tif (!preventClick(e, elm) || cache.get(pathname)) {\n\t\t\t\t// log('NARP')\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\trequest(pathname).catch(err => {\n\t\t\t\tconsole.warn(`[PREFETCH] no page found at ${pathname}`)\n\t\t\t})\n\t\t}\n\n\t\tonClick = (e, elm) => {\n\t\t\tconst { pathname } = elm\n\n\t\t\tif (!preventClick(e, elm)) {\n\t\t\t\treturn\n\t\t\t}\n\n\t\t\te.stopPropagation()\n\t\t\te.preventDefault()\n\n\t\t\tif (pathname === window.location.pathname) return\n\n\t\t\tconst dataAttrs = composeProps([...elm.attributes])\n\n\t\t\tRouter.goTo({ pathname, dataAttrs, action: 'PUSH' })\n\t\t}\n\n\t\tmount = () => {\n\t\t\teventBus.on(Action.ROUTER_POP_EVENT, ({ pathname }) => {\n\t\t\t\tlifecycle.transition({ pathname, action: 'POP' })\n\t\t\t})\n\n\t\t\teventBus.on(\n\t\t\t\tAction.ROUTE_TRANSITION_AFTER_DOM_UPDATE,\n\t\t\t\t({ to: { params: { path } } }) => {\n\t\t\t\t\tthis.$links(path)\n\t\t\t\t}\n\t\t\t)\n\n\t\t\tthis.$events.attachAll()\n\n\t\t\treturn this\n\t\t}\n\n\t\tlazyload = () => {\n\t\t\tconst links = getLinks([...document.querySelectorAll('a')])\n\n\t\t\tlinks.length && worker.postMessage({ links })\n\n\t\t\treturn this\n\t\t}\n\t}\n})()\n","import loader from '@/core/modules/loader'\nimport eventBus from '@/core/modules/eventBus'\nimport Router from '@/core/router/'\nimport * as Actions from '@/core/router/actions'\n\nexport default (() => {\n\treturn class App {\n\t\tconstructor({ router, chunks }) {\n\t\t\tif (router) {\n\t\t\t\tthis.$router = new Router({ ...router })\n\t\t\t}\n\n\t\t\tthis.$loader = loader(chunks)\n\t\t}\n\n\t\tmount = () => {\n\t\t\tthis.$loader.hydrate(document)\n\n\t\t\tthis.$router && this.$router.mount().lazyload()\n\n\t\t\teventBus.on(Actions.ROUTE_TRANSITION_BEFORE_DOM_UPDATE, () => {\n\t\t\t\tthis.$loader.unmount()\n\t\t\t})\n\n\t\t\teventBus.on(Actions.ROUTE_TRANSITION_AFTER_DOM_UPDATE, ({ newHtml }) => {\n\t\t\t\tthis.$loader.hydrate(newHtml)\n\t\t\t\tthis.$router.lazyload()\n\t\t\t})\n\t\t}\n\t}\n})()\n","export default (() => {\n\tlet prevHtml\n\tlet nextHtml\n\n\tconst toggleBtnState = (wrapper, type, display) => {\n\t\tconst $btn = wrapper.querySelector(`[data-pagination-${type}]`)\n\t\tif ($btn) {\n\t\t\t$btn.style.display = display\n\t\t}\n\t}\n\n\treturn {\n\t\tshouldUnmount({ from }) {\n\t\t\tconst { pagination, paginationParent } = from.options\n\n\t\t\tif (pagination || paginationParent) return false\n\n\t\t\treturn true\n\t\t},\n\n\t\tupdateDom({ wrapper, newHtml, title, from, to }) {\n\t\t\tconst { pageNo: fromPageNumber, options: fromOptions } = from\n\t\t\tconst { pageNo: toPageNumber } = to\n\t\t\tconst alienPage = !fromOptions.paginationParent && !fromOptions.pagination\n\n\t\t\t// if we are coming from a pagination page\n\n\t\t\tif (alienPage) {\n\t\t\t\tprevHtml = null\n\t\t\t\twrapper.innerHTML = ''\n\t\t\t}\n\n\t\t\t// if we are going forward\n\t\t\tif (toPageNumber > fromPageNumber) {\n\t\t\t\t// does the new page we want to insert already exist in the dom\n\t\t\t\t// this might be the case from POP actions\n\t\t\t\t// if it does already exist, do nothing and return\n\t\t\t\tconst $newHtmlAlreadyExists = wrapper.querySelector(\n\t\t\t\t\t`[data-spon-page=\"${toPageNumber}\"]`\n\t\t\t\t)\n\n\t\t\t\tif ($newHtmlAlreadyExists) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\n\t\t\t\t// remove the pagination button\n\t\t\t\t// if the previous html exits, that's where the button will be\n\t\t\t\t// if not look in the nextHtml sibling, that's where it's gonna be\n\n\t\t\t\t// set the current page number on data-spon-page attribute\n\t\t\t\tnewHtml.setAttribute('data-spon-page', toPageNumber)\n\n\t\t\t\t// inject into the dom\n\t\t\t\twrapper.appendChild(newHtml)\n\n\t\t\t\tconst $previousWrapper = wrapper.querySelector(\n\t\t\t\t\t`[data-spon-page=\"${toPageNumber - 1}\"]`\n\t\t\t\t)\n\t\t\t\tconst $btnWrapper = $previousWrapper ? $previousWrapper : wrapper\n\n\t\t\t\tif (!alienPage) {\n\t\t\t\t\ttoggleBtnState($btnWrapper, 'next', 'none')\n\t\t\t\t\ttoggleBtnState(newHtml, 'prev', 'none')\n\t\t\t\t}\n\n\t\t\t\tif (newHtml.previousElementSibling) {\n\t\t\t\t\ttoggleBtnState(newHtml.previousElementSibling, 'prev', 'none')\n\t\t\t\t}\n\t\t\t\t// store a reference to the newly inject markup\n\t\t\t\tprevHtml = newHtml\n\t\t\t} else {\n\t\t\t\t// Going back... presuming this is via a POP action\n\t\t\t\t// If we have some previously injectec markup\n\t\t\t\t// we might want to remove it\n\t\t\t\tif (prevHtml) {\n\t\t\t\t\t// get a reference to the previous node (the page befores markup)\n\t\t\t\t\tconst tempPrev = prevHtml.previousElementSibling\n\n\t\t\t\t\t// if it exists we should remove it\n\t\t\t\t\tif (tempPrev) {\n\t\t\t\t\t\ttoggleBtnState(tempPrev, 'next', '')\n\t\t\t\t\t\tprevHtml.parentNode.removeChild(prevHtml)\n\t\t\t\t\t\tif (wrapper.children.length === 1) {\n\t\t\t\t\t\t\ttoggleBtnState(tempPrev, 'prev', '')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// update the prevHtml to the temp value, could be null\n\t\t\t\t\tprevHtml = tempPrev\n\t\t\t\t\t// reset the nextHtml\n\t\t\t\t\tnextHtml = null\n\n\t\t\t\t\t// if we don't have any previous html\n\t\t\t\t\tif (!tempPrev) {\n\t\t\t\t\t\t// empty the wrapper\n\t\t\t\t\t\twrapper.innerHTML = ''\n\t\t\t\t\t\t// set the current page number on data-spon-page attribute\n\t\t\t\t\t\tnewHtml.setAttribute('data-spon-page', toPageNumber)\n\t\t\t\t\t\t// inject into the dom\n\t\t\t\t\t\twrapper.appendChild(newHtml)\n\t\t\t\t\t\ttoggleBtnState(newHtml, 'prev', '')\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// we have no previous html so we are are trying to inject some\n\n\t\t\t\t\t// set the current page number on data-spon-page attribute\n\t\t\t\t\tnewHtml.setAttribute('data-spon-page', toPageNumber)\n\t\t\t\t\t// get tje nextHTML (i.e. the next pages)\n\t\t\t\t\tnextHtml = wrapper.querySelector(this.el)\n\t\t\t\t\t// if there is no such thing we can just inject the new markup\n\t\t\t\t\tif (!nextHtml) {\n\t\t\t\t\t\t// inject into the dom\n\t\t\t\t\t\twrapper.appendChild(newHtml)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// we do have 'nextHtml'... inject the nextHtml before the\n\t\t\t\t\t\t// existing chunk\n\t\t\t\t\t\ttoggleBtnState(nextHtml, 'prev', '')\n\t\t\t\t\t\tnextHtml = nextHtml.parentNode.insertBefore(newHtml, nextHtml)\n\t\t\t\t\t\ttoggleBtnState(newHtml, 'next', 'none')\n\t\t\t\t\t}\n\t\t\t\t\t// reset the prevHtml ref\n\t\t\t\t\tprevHtml = null\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// update the title\n\t\t\tdocument.title = title\n\t\t}\n\t}\n})()\n","import '@/plugins/logger'\nimport App from '@/core/App'\nimport routes from '@/views'\n\nif (module.hot) {\n\tmodule.hot.accept()\n}\n\nnew App({\n\trouter: {\n\t\troutes,\n\t\trootNode: document.getElementById('page-wrapper'),\n\t\tnavLinks: [\n\t\t\t...document.querySelectorAll('header a'),\n\t\t\t...document.querySelectorAll('footer a')\n\t\t],\n\t\tclasses: {\n\t\t\tmatch: 'is-current',\n\t\t\troot: 'is-current-root',\n\t\t\tparent: 'is-current-parent'\n\t\t}\n\t},\n\n\tchunks: behaviour => import(`@/behaviours/${behaviour}`)\n}).mount()\n","import paginationExample from '@/views/loaders/pagination'\n\nexport default [\n\t{\n\t\tpath: '/',\n\t\tview: {}\n\t},\n\t{\n\t\tpath: '/blog/',\n\t\tview: {},\n\t\toptions: {\n\t\t\tpaginationParent: true\n\t\t},\n\t\tchildren: [\n\t\t\t{\n\t\t\t\tpath: /(p)+(\\d+)/,\n\t\t\t\tname: 'pagination',\n\t\t\t\tview: {\n\t\t\t\t\t...paginationExample\n\t\t\t\t},\n\t\t\t\toptions: {\n\t\t\t\t\tpagination: true\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tpath: ':id',\n\t\t\t\tname: 'post',\n\t\t\t\tview: {\n\t\t\t\t\tonEnter({ next }) {\n\t\t\t\t\t\tlog('hello bitches')\n\n\t\t\t\t\t\tnext()\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\toptions: {}\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tpath: '*',\n\t\tview: {}\n\t}\n]\n","var map = {\n\t\"./Header\": [\n\t\t17,\n\t\t0,\n\t\t6\n\t],\n\t\"./Header.js\": [\n\t\t17,\n\t\t0,\n\t\t6\n\t],\n\t\"./HomePage\": [\n\t\t16,\n\t\t0,\n\t\t5\n\t],\n\t\"./HomePage.js\": [\n\t\t16,\n\t\t0,\n\t\t5\n\t],\n\t\"./Page1\": [\n\t\t15,\n\t\t0,\n\t\t4\n\t],\n\t\"./Page1.js\": [\n\t\t15,\n\t\t0,\n\t\t4\n\t],\n\t\"./Page2\": [\n\t\t14,\n\t\t0,\n\t\t3\n\t],\n\t\"./Page2.js\": [\n\t\t14,\n\t\t0,\n\t\t3\n\t],\n\t\"./Page3\": [\n\t\t13,\n\t\t0,\n\t\t2\n\t],\n\t\"./Page3.js\": [\n\t\t13,\n\t\t0,\n\t\t2\n\t],\n\t\"./Page4\": [\n\t\t12,\n\t\t0,\n\t\t1\n\t],\n\t\"./Page4.js\": [\n\t\t12,\n\t\t0,\n\t\t1\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error('Cannot find module \"' + req + '\".');\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\treturn Promise.all(ids.slice(1).map(__webpack_require__.e)).then(function() {\n\t\tvar module = __webpack_require__(ids[0]);\n\t\treturn module;\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 19;\nmodule.exports = webpackAsyncContext;","import debug from 'debug'\n\nwindow.log = global.log = debug('app:log')\n\nprocess.env.NODE_ENV === 'development'\n\t? debug.enable('app:log')\n\t: debug.disable('app:log')\n\n// log(`Logging is enabled!, NODE_ENV: ${process.env.NODE_ENV}`)\n"],"sourceRoot":""}