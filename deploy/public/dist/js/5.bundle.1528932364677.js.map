{"version":3,"sources":["webpack:///./core/Behaviour.js","webpack:///./core/modules/resizer.js","webpack:///./behaviours/HomePage.js"],"names":["$html","$body","MixinBuilder","superclass","_classCallCheck","this","_len","arguments","length","mixins","Array","_key","reduce","c","mixin","mix","__webpack_exports__","document","getElementsByTagName","body","Behaviour","el","undefined","name","mount","unmount","$name","$el","$$eventBus","_core_modules_eventBus__WEBPACK_IMPORTED_MODULE_1__","$data","Object","_core_modules_refs__WEBPACK_IMPORTED_MODULE_0__","composeProps","attributes","_createClass","key","value","routes","on","_core_router_actions__WEBPACK_IMPORTED_MODULE_2__","enter","exit","off","resizer","query","compose_default","replace_default","item","getPropertyValue","getCurrentMediaQuery","window","getComputedStyle","windowMatch","breakpoint","matchMedia","matches","getWindowProps","width","innerWidth","height","innerHeight","mapEventsToResize","events","map_default","_ref","_ref2","_slicedToArray","fn","matchQueryTest","once","arg","match","bind","eventBus","entries","handle","last","windowResizeEvent","_getWindowProps","emit","addWindowResizeEvent","isRunning","raf_default","a","addEventListener","destroy","removeEventListener","cancel","bank","_extends","forEach","ScreenMixin","_superclass","_class","_possibleConstructorReturn","__proto__","getPrototypeOf","apply","_inherits","$$screen","screens","_get","prototype","call","HomePage","click [data-link]","_this","$$events","attachAll","$node","createElement","innerHTML","JSON","stringify","$$refs","appendChild","onClick","e","elm","preventDefault","classList","toggle","(min-width: 1024px)","add","viewport","log","with","createEvents","inview","refs"],"mappings":"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","file":"5.bundle.1528932364677.js","sourcesContent":["import { composeProps } from '@/core/modules/refs'\nimport eventBus from '@/core/modules/eventBus'\nimport * as Actions from '@/core/router/actions'\n\nclass MixinBuilder {\n\tconstructor(superclass) {\n\t\tthis.superclass = superclass\n\t}\n\n\twith(...mixins) {\n\t\treturn mixins.reduce((c, mixin) => mixin(c), this.superclass)\n\t}\n}\n\nexport const mix = superclass => new MixinBuilder(superclass)\n\n/**\n * class Behaviour\n *\n */\nexport default (() => {\n\tconst $html = document.getElementsByTagName('html')[0]\n\tconst $body = document.body\n\n\treturn class Behaviour {\n\t\tconstructor(el = document, name = '') {\n\t\t\tthis.$name = name\n\t\t\tthis.$el = el\n\t\t\tthis.$body = $body\n\t\t\tthis.$html = $html\n\n\t\t\tthis.$$eventBus = eventBus\n\n\t\t\tthis.$data = composeProps([...this.$el.attributes]) // here lies a bug\n\t\t}\n\n\t\tinit() {\n\t\t\tif (this.routes) {\n\t\t\t\tthis.$$eventBus.on(Actions.ROUTE_TRANSITION_ENTER, this.routes.enter)\n\t\t\t\tthis.$$eventBus.on(Actions.ROUTE_TRANSITION_EXIT, this.routes.exit)\n\t\t\t}\n\t\t}\n\n\t\tmount = () => {}\n\n\t\tunmount = () => {}\n\n\t\tdestroy() {\n\t\t\tthis.unmount()\n\n\t\t\tif (this.routes) {\n\t\t\t\tthis.$$eventBus.off(Actions.ROUTE_TRANSITION_ENTER, this.routes.enter)\n\t\t\t\tthis.$$eventBus.off(Actions.ROUTE_TRANSITION_EXIT, this.routes.exit)\n\t\t\t}\n\t\t}\n\t}\n})()\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import eventBus from '@/core/modules/eventBus'\nimport raf from 'raf'\nimport * as R from 'ramda'\n/** *\n *\n * Wrapper/Helper window resize event\n *\n * @function resizer\n *\n * @return :function resizer\n */\n\nexport const resizer = (function() {\n\t// get the :after style from the body\n\tconst getStyle = () => window.getComputedStyle(document.body, ':after')\n\n\t// get the content prop and give it a clean\n\tconst query = R.compose(R.replace(/'|\"/g, ''), item =>\n\t\titem.getPropertyValue('content')\n\t)\n\n\t// compose the functions together to return the current breakpoint\n\tconst getCurrentMediaQuery = R.compose(query, getStyle)\n\n\tconst windowMatch = breakpoint => window.matchMedia(breakpoint).matches\n\n\t/**\n\t *\n\t * @function getWindowProps\n\t *\n\t * @return :object with the current width/height/breakpoint\n\t */\n\tfunction getWindowProps() {\n\t\tconst width = window.innerWidth\n\t\tconst height = window.innerHeight\n\t\tconst query = getCurrentMediaQuery()\n\n\t\treturn {\n\t\t\twidth,\n\t\t\theight,\n\t\t\tquery\n\t\t}\n\t}\n\t/**\n\t *\n\t * consumes an object like this:\n\t *\n\t *  {\n\t *\t'(min-width: 960px)': () => {},\n\t *\t'(min-width: 680px)': () => {}\n\t *\t}\n\t *\n\t * @function mapEventsToResize\n\t *\n\t * @param :object\n\t *\n\t * @return :array of functions\n\t */\n\tfunction mapEventsToResize(events) {\n\t\treturn R.compose(\n\t\t\tR.map(([breakpoint, fn]) => {\n\t\t\t\t// <REFACTOR></REFACTOR> me thinks this could be written in\n\t\t\t\t// a way that it can be defined outside of the loop\n\t\t\t\tconst once = (arg, fn) => {\n\t\t\t\t\tif (once.value === arg) return\n\t\t\t\t\tfn({ match: arg, ...getWindowProps() })\n\t\t\t\t\tonce.value = arg\n\t\t\t\t}\n\n\t\t\t\t// <REFACTOR></REFACTOR> me thinks this could be written in\n\t\t\t\t// a way that it can be defined outside of the loop\n\t\t\t\tconst test = (breakpoint, fn) => {\n\t\t\t\t\tconst state = windowMatch(breakpoint)\n\t\t\t\t\tonce(state, fn)\n\t\t\t\t}\n\n\t\t\t\tconst matchQueryTest = test.bind(null, breakpoint, fn)\n\t\t\t\tif (windowMatch(breakpoint)) matchQueryTest()\n\t\t\t\teventBus.on('window:resize', matchQueryTest)\n\n\t\t\t\treturn matchQueryTest\n\t\t\t}),\n\t\t\tObject.entries\n\t\t)(events)\n\t}\n\n\t// setup a handle reference\n\tlet handle\n\n\t// reference the current, will become to previous one\n\tlet last = getCurrentMediaQuery()\n\n\t/**\n\t * The throttled window resize event\n\t * @private\n\t * @function windowResizeEvent\n\t *\n\t * @return void\n\t */\n\tfunction windowResizeEvent() {\n\t\tconst { width, height, query } = getWindowProps()\n\n\t\teventBus.emit('window:resize', {\n\t\t\twidth,\n\t\t\theight,\n\t\t\tquery\n\t\t})\n\n\t\tif (query !== last) {\n\t\t\tlast = query\n\t\t\teventBus.emit('window:breakpoint', {\n\t\t\t\twidth,\n\t\t\t\theight,\n\t\t\t\tquery\n\t\t\t})\n\t\t}\n\t}\n\n\t/**\n\t * add the window resize event\n\t *\n\t * returns the destroy method\n\t *\n\t * @function addWindowResizeEvent\n\t *\n\t * @return object\n\t */\n\tfunction addWindowResizeEvent() {\n\t\tif (addWindowResizeEvent.isRunning) return\n\t\taddWindowResizeEvent.isRunning = true\n\t\thandle = raf.bind(null, windowResizeEvent)\n\n\t\twindow.addEventListener('resize', handle, false)\n\n\t\treturn {\n\t\t\tdestroy() {\n\t\t\t\tif (!addWindowResizeEvent.isRunning) return\n\t\t\t\taddWindowResizeEvent.isRunning = false\n\t\t\t\twindow.removeEventListener('resize', handle, false)\n\t\t\t\thandle.cancel()\n\t\t\t}\n\t\t}\n\t}\n\n\taddWindowResizeEvent.isRunning = false\n\n\treturn (events = {}) => {\n\t\taddWindowResizeEvent()\n\n\t\t// store the current events\n\t\tlet bank = mapEventsToResize(events)\n\n\t\treturn {\n\t\t\tget breakpoint() {\n\t\t\t\treturn getCurrentMediaQuery()\n\t\t\t},\n\n\t\t\tget width() {\n\t\t\t\treturn window.innerWidth\n\t\t\t},\n\n\t\t\tget height() {\n\t\t\t\treturn window.innerHeight\n\t\t\t},\n\n\t\t\tdestroy() {\n\t\t\t\tbank.forEach(fn => eventBus.off('window:resize', fn))\n\t\t\t\tbank = []\n\t\t\t},\n\n\t\t\t...eventBus\n\t\t}\n\t}\n})()\n\nexport const ScreenMixin = superclass =>\n\tclass extends superclass {\n\t\tinit() {\n\t\t\tthis.$$screen = resizer(this.screens)\n\t\t\tif (super.init) super.init()\n\t\t\treturn this\n\t\t}\n\n\t\tdestroy() {\n\t\t\tthis.$$screen.destroy()\n\t\t\tif (super.destroy) super.destroy()\n\t\t}\n\t}\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n","import Behaviour, { mix } from '@/core/Behaviour'\nimport { ScreenMixin } from '@/core/modules/resizer'\nimport { EventsMixin } from '@/core/modules/createEvents'\nimport { RefsMixin } from '@/core/modules/refs'\nimport { InviewMixin } from '@/core/modules/inview'\n\nexport default class HomePage extends mix(Behaviour).with(\n\tScreenMixin,\n\tEventsMixin,\n\tInviewMixin,\n\tRefsMixin\n) {\n\tevents = {\n\t\t'click [data-link]': 'onClick'\n\t}\n\n\tmount = () => {\n\t\tthis.$$events.attachAll()\n\n\t\tconst $node = document.createElement('pre')\n\n\t\t$node.innerHTML = JSON.stringify(this.$$refs, null, 2)\n\n\t\tthis.$el.appendChild($node)\n\n\t\t// this.$$inview.watch({\n\t\t// \tselector: '[data-element]'\n\t\t// })\n\t}\n\n\tonClick = (e, elm) => {\n\t\te.preventDefault()\n\t\telm.classList.toggle('huzzah')\n\t}\n\n\tscreens = {\n\t\t'(min-width: 1024px)': () => {}\n\t}\n\n\tunmount = () => {\n\t\t// log('unmount: HomePage')\n\t\tthis.$el.classList.add('unmount')\n\t}\n\n\tviewport = {\n\t\tenter: item => {\n\t\t\tlog(item)\n\t\t},\n\n\t\texit: () => {\n\t\t\tlog('exit')\n\t\t}\n\t}\n\n\troutes = {\n\t\tenter: () => {\n\t\t\tthis.$el.classList.toggle('enter')\n\t\t},\n\t\texit: () => {\n\t\t\tthis.$el.classList.toggle('exit')\n\t\t}\n\t}\n}\n\n\nif (module.hot) {module.hot.accept(function(err) {\nif (err) {\nconsole.error(err);\n}\n});\n}\n"],"sourceRoot":""}